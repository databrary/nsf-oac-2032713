<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EAGER: Expanding public access to restricted research data - 4&nbsp; NSF-funded projects on Databrary</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./demographics.html" rel="next">
<link href="./databraryr-pkg.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="include/bib/apa.csl">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./nsf-funding.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">NSF-funded projects on Databrary</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">EAGER: Expanding public access to restricted research data</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/databrary/nsf-oac-2032713/tree/main/src/" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./community-feedback.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Researcher Feedback</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./recommendations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Community Recommendations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./databraryr-pkg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><code>databraryr</code> R package</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nsf-funding.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">NSF-funded projects on Databrary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./demographics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Demographic data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./metadata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Metadata standardization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Resources</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#volume-funders" id="toc-volume-funders" class="nav-link" data-scroll-target="#volume-funders">Volume funders</a>
  <ul class="collapse">
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#databrary-volumes-that-mention-nsf" id="toc-databrary-volumes-that-mention-nsf" class="nav-link" data-scroll-target="#databrary-volumes-that-mention-nsf">Databrary volumes that mention NSF</a></li>
  </ul></li>
  <li><a href="#nsf-funding-data-on-these-projects" id="toc-nsf-funding-data-on-these-projects" class="nav-link" data-scroll-target="#nsf-funding-data-on-these-projects">NSF funding data on these projects</a>
  <ul class="collapse">
  <li><a href="#illustration-using-the-current-grant" id="toc-illustration-using-the-current-grant" class="nav-link" data-scroll-target="#illustration-using-the-current-grant">Illustration using the current grant</a></li>
  <li><a href="#funding-information-from-shared-databrary-volumes" id="toc-funding-information-from-shared-databrary-volumes" class="nav-link" data-scroll-target="#funding-information-from-shared-databrary-volumes">Funding information from shared Databrary volumes</a></li>
  <li><a href="#visualizations" id="toc-visualizations" class="nav-link" data-scroll-target="#visualizations">Visualizations</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">NSF-funded projects on Databrary</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This page summarizes data about NSF-funded projects that have used Databrary to store and share data. This is one component of making research data stored on the site more accessible.</p>
<section id="background" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="background">Background</h2>
<p>Rick Gilmore and Andrea Seisler developed code to generate a series of reports about Databrary’s users, assets, and data.</p>
<p>In summer 2023, that code was migrated to the Databrary organization on GitHub. The code base for these reports can be found at <a href="https://github.com/databrary/analytics" class="uri">https://github.com/databrary/analytics</a>. The latest fully rendered analytics report can be found at <a href="https://databrary.github.io/analytics" class="uri">https://databrary.github.io/analytics</a>.</p>
<p><strong>Note</strong>: Databrary’s API does not permit access to datasets or volumes that have yet to be shared by the volume owner. This means that the data we report here are an underestimate of the total number of projects and datasets that have actually received NSF funding.</p>
</section>
<section id="volume-funders" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="volume-funders">Volume funders</h2>
<p>Databrary permits users to list funders associated with a dataset. The funding information across the site is updated regularly. The latest report can be found at <a href="https://databrary.github.io/analytics/funders.html" class="uri">https://databrary.github.io/analytics/funders.html</a>.</p>
<p>As of 2023-08-30, NSF was listed as a funder by the largest number of volumes on Databrary.</p>
<p>Here, we regenerate the data.</p>
<section id="setup" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="setup">Setup</h3>
<p>Most of the work is done via functions listed in <code>R/functions.R</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/functions.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="databrary-volumes-that-mention-nsf" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="databrary-volumes-that-mention-nsf">Databrary volumes that mention NSF</h3>
<p>To query Databrary for the volumes that mention an NSF award, we run the following.</p>
<p>As of 2023-09-01, volume 1635 was the largest volume index. So, we can query Databrary volume-by-volume, to collect data about volumes that list NSF as a funder, as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>db_w_nsf <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1635</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>             get_vol_awards,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">funder_str =</span> <span class="st">"NSF"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">.progress =</span> <span class="st">"Databrary vols w/ NSF:"</span>) <span class="sc">|&gt;</span> purrr<span class="sc">::</span><span class="fu">list_rbind</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_clean_nsf_award_id</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(db_w_nsf, <span class="st">"csv/databrary-vols-w-nsf-funding-all.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above uses the <code>get_vol_awards()</code> function and the <code>funder_str</code> parameter to select award information that lists NSF. Then, the NSF award IDs are cleaned to match the NSF format with <code>add_clean_nsf_award_id()</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The funding award IDs must be cleaned because the current Databrary system does not validate their formats. The funding award information is a free text field. It would be helpful if a future version of Databrary could validate these entries to reduce <em>post hoc</em> data cleaning.</p>
</div>
</div>
<p>This takes several moments, so for this report, we import a previously saved file with the same data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>db_nsf <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"csv/databrary-vols-w-nsf-funding-all.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we can start to visualize the data. Here is a table with all of the shared Databrary volumes mentioning NSF as a funder:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>db_nsf <span class="ot">&lt;-</span> db_nsf <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(award_id)) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">"https://databrary.org/volume/"</span>, vol_id))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>db_nsf <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(vol_id, award_id, url) <span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'html'</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_material</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"700px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:700px; ">
<table class="lightable-material table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vol_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">award_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">1238599</td>
<td style="text-align: left;">https://databrary.org/volume/1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: left;">0721383</td>
<td style="text-align: left;">https://databrary.org/volume/8</td>
</tr>
<tr class="even">
<td style="text-align: right;">11</td>
<td style="text-align: left;">1349044</td>
<td style="text-align: left;">https://databrary.org/volume/11</td>
</tr>
<tr class="odd">
<td style="text-align: right;">15</td>
<td style="text-align: left;">0808767</td>
<td style="text-align: left;">https://databrary.org/volume/15</td>
</tr>
<tr class="even">
<td style="text-align: right;">15</td>
<td style="text-align: left;">1052736</td>
<td style="text-align: left;">https://databrary.org/volume/15</td>
</tr>
<tr class="odd">
<td style="text-align: right;">23</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/23</td>
</tr>
<tr class="even">
<td style="text-align: right;">30</td>
<td style="text-align: left;">1247590</td>
<td style="text-align: left;">https://databrary.org/volume/30</td>
</tr>
<tr class="odd">
<td style="text-align: right;">31</td>
<td style="text-align: left;">0092452</td>
<td style="text-align: left;">https://databrary.org/volume/31</td>
</tr>
<tr class="even">
<td style="text-align: right;">32</td>
<td style="text-align: left;">0092452</td>
<td style="text-align: left;">https://databrary.org/volume/32</td>
</tr>
<tr class="odd">
<td style="text-align: right;">45</td>
<td style="text-align: left;">1147543</td>
<td style="text-align: left;">https://databrary.org/volume/45</td>
</tr>
<tr class="even">
<td style="text-align: right;">49</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/49</td>
</tr>
<tr class="odd">
<td style="text-align: right;">68</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/68</td>
</tr>
<tr class="even">
<td style="text-align: right;">73</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/73</td>
</tr>
<tr class="odd">
<td style="text-align: right;">75</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/75</td>
</tr>
<tr class="even">
<td style="text-align: right;">77</td>
<td style="text-align: left;">1248076</td>
<td style="text-align: left;">https://databrary.org/volume/77</td>
</tr>
<tr class="odd">
<td style="text-align: right;">79</td>
<td style="text-align: left;">1331073</td>
<td style="text-align: left;">https://databrary.org/volume/79</td>
</tr>
<tr class="even">
<td style="text-align: right;">81</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/81</td>
</tr>
<tr class="odd">
<td style="text-align: right;">109</td>
<td style="text-align: left;">1220305</td>
<td style="text-align: left;">https://databrary.org/volume/109</td>
</tr>
<tr class="even">
<td style="text-align: right;">116</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/116</td>
</tr>
<tr class="odd">
<td style="text-align: right;">207</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">https://databrary.org/volume/207</td>
</tr>
<tr class="even">
<td style="text-align: right;">207</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">https://databrary.org/volume/207</td>
</tr>
<tr class="odd">
<td style="text-align: right;">218</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">https://databrary.org/volume/218</td>
</tr>
<tr class="even">
<td style="text-align: right;">253</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">https://databrary.org/volume/253</td>
</tr>
<tr class="odd">
<td style="text-align: right;">253</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">https://databrary.org/volume/253</td>
</tr>
<tr class="even">
<td style="text-align: right;">268</td>
<td style="text-align: left;">15233982</td>
<td style="text-align: left;">https://databrary.org/volume/268</td>
</tr>
<tr class="odd">
<td style="text-align: right;">269</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">https://databrary.org/volume/269</td>
</tr>
<tr class="even">
<td style="text-align: right;">269</td>
<td style="text-align: left;">166106</td>
<td style="text-align: left;">https://databrary.org/volume/269</td>
</tr>
<tr class="odd">
<td style="text-align: right;">272</td>
<td style="text-align: left;">1255832</td>
<td style="text-align: left;">https://databrary.org/volume/272</td>
</tr>
<tr class="even">
<td style="text-align: right;">324</td>
<td style="text-align: left;">1248076</td>
<td style="text-align: left;">https://databrary.org/volume/324</td>
</tr>
<tr class="odd">
<td style="text-align: right;">471</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">https://databrary.org/volume/471</td>
</tr>
<tr class="even">
<td style="text-align: right;">480</td>
<td style="text-align: left;">1561182</td>
<td style="text-align: left;">https://databrary.org/volume/480</td>
</tr>
<tr class="odd">
<td style="text-align: right;">480</td>
<td style="text-align: left;">1561122</td>
<td style="text-align: left;">https://databrary.org/volume/480</td>
</tr>
<tr class="even">
<td style="text-align: right;">545</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">https://databrary.org/volume/545</td>
</tr>
<tr class="odd">
<td style="text-align: right;">546</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">https://databrary.org/volume/546</td>
</tr>
<tr class="even">
<td style="text-align: right;">546</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">https://databrary.org/volume/546</td>
</tr>
<tr class="odd">
<td style="text-align: right;">608</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">https://databrary.org/volume/608</td>
</tr>
<tr class="even">
<td style="text-align: right;">707</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">https://databrary.org/volume/707</td>
</tr>
<tr class="odd">
<td style="text-align: right;">950</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">https://databrary.org/volume/950</td>
</tr>
<tr class="even">
<td style="text-align: right;">950</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">https://databrary.org/volume/950</td>
</tr>
<tr class="odd">
<td style="text-align: right;">987</td>
<td style="text-align: left;">1620294</td>
<td style="text-align: left;">https://databrary.org/volume/987</td>
</tr>
<tr class="even">
<td style="text-align: right;">1062</td>
<td style="text-align: left;">1462280</td>
<td style="text-align: left;">https://databrary.org/volume/1062</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1062</td>
<td style="text-align: left;">1400802</td>
<td style="text-align: left;">https://databrary.org/volume/1062</td>
</tr>
<tr class="even">
<td style="text-align: right;">1062</td>
<td style="text-align: left;">1400810</td>
<td style="text-align: left;">https://databrary.org/volume/1062</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1116</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">https://databrary.org/volume/1116</td>
</tr>
<tr class="even">
<td style="text-align: right;">1135</td>
<td style="text-align: left;">1302741</td>
<td style="text-align: left;">https://databrary.org/volume/1135</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1187</td>
<td style="text-align: left;">1655300</td>
<td style="text-align: left;">https://databrary.org/volume/1187</td>
</tr>
<tr class="even">
<td style="text-align: right;">1241</td>
<td style="text-align: left;">1761053</td>
<td style="text-align: left;">https://databrary.org/volume/1241</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1249</td>
<td style="text-align: left;">1462280</td>
<td style="text-align: left;">https://databrary.org/volume/1249</td>
</tr>
<tr class="even">
<td style="text-align: right;">1279</td>
<td style="text-align: left;">1749376</td>
<td style="text-align: left;">https://databrary.org/volume/1279</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1294</td>
<td style="text-align: left;">0951580</td>
<td style="text-align: left;">https://databrary.org/volume/1294</td>
</tr>
<tr class="even">
<td style="text-align: right;">1398</td>
<td style="text-align: left;">2043717</td>
<td style="text-align: left;">https://databrary.org/volume/1398</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1403</td>
<td style="text-align: left;">1761053</td>
<td style="text-align: left;">https://databrary.org/volume/1403</td>
</tr>
<tr class="even">
<td style="text-align: right;">1437</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">https://databrary.org/volume/1437</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1437</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">https://databrary.org/volume/1437</td>
</tr>
<tr class="even">
<td style="text-align: right;">1437</td>
<td style="text-align: left;">1728133</td>
<td style="text-align: left;">https://databrary.org/volume/1437</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1474</td>
<td style="text-align: left;">1052736</td>
<td style="text-align: left;">https://databrary.org/volume/1474</td>
</tr>
<tr class="even">
<td style="text-align: right;">1495</td>
<td style="text-align: left;">1628300</td>
<td style="text-align: left;">https://databrary.org/volume/1495</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1550</td>
<td style="text-align: left;">1444758</td>
<td style="text-align: left;">https://databrary.org/volume/1550</td>
</tr>
<tr class="even">
<td style="text-align: right;">1550</td>
<td style="text-align: left;">1948790</td>
<td style="text-align: left;">https://databrary.org/volume/1550</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1580</td>
<td style="text-align: left;">1941449</td>
<td style="text-align: left;">https://databrary.org/volume/1580</td>
</tr>
<tr class="even">
<td style="text-align: right;">1589</td>
<td style="text-align: left;">2004983</td>
<td style="text-align: left;">https://databrary.org/volume/1589</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that we have added a URL that links directly to the shared volume on Databrary.</p>
</div>
</div>
<p>There are <span class="math inline">\(n=\)</span> 50 unique <em>shared</em> Databrary volumes that list NSF as a funder, and <span class="math inline">\(n=\)</span> 38 unique NSF awards. This is because some NSF awards have resulted in multiple shared Databrary volumes.</p>
</section>
</section>
<section id="nsf-funding-data-on-these-projects" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="nsf-funding-data-on-these-projects">NSF funding data on these projects</h2>
<p>We can now match these projects with funding information available about them from NSF directly.</p>
<section id="illustration-using-the-current-grant" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="illustration-using-the-current-grant">Illustration using the current grant</h3>
<p>Before we do that, we will illustrate how the <code>get_nsf_data_for_award_id()</code> function can be used to gather information from the NSF funding database about the current project.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>nsf_2032713_df <span class="ot">&lt;-</span> <span class="fu">get_nsf_data_for_award_id</span>(<span class="dv">2032713</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>nsf_2032713_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  agency awardeeCity     awardeeName    awardeeStateCode fundsObligatedAmt id   
  &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;             &lt;chr&gt;
1 NSF    University Park Pennsylvania … PA               199977            2032…
# ℹ 6 more variables: piFirstName &lt;chr&gt;, piLastName &lt;chr&gt;,
#   publicAccessMandate &lt;chr&gt;, date &lt;chr&gt;, startDate &lt;chr&gt;, title &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="funding-information-from-shared-databrary-volumes" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="funding-information-from-shared-databrary-volumes">Funding information from shared Databrary volumes</h3>
<p>To re-generate a data frame with the Databrary volumes for which we are able to extract more details about the NSF funding from the NSF itself, we run the following:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize_mult_vol_nsf_awards</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1635</span>, <span class="at">vb =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This takes several minutes, so for this report, we import a previously saved file with these data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>nsf <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"csv/databrary-nsf-funding-details-all.csv"</span>, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can begin to visualize these data as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>nsf <span class="ot">&lt;-</span> nsf <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(piLastName), <span class="sc">!</span><span class="fu">is.na</span>(piFirstName), <span class="sc">!</span><span class="fu">is.na</span>(award_id))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>nsf <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(piLastName, piFirstName, award_id, date, vol_id) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">piLastName =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(piLastName),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">piFirstName =</span> stringr<span class="sc">::</span><span class="fu">str_to_title</span>(piFirstName)) <span class="sc">|&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(piLastName, award_id, vol_id) <span class="sc">|&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'html'</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_material</span>() <span class="sc">|&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"700px"</span>, <span class="at">height =</span> <span class="st">"300px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:700px; ">
<table class="lightable-material table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piLastName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piFirstName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">award_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">date</th>
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vol_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">1238599</td>
<td style="text-align: left;">09/25/2012</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">07/27/2016</td>
<td style="text-align: right;">471</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">07/27/2016</td>
<td style="text-align: right;">707</td>
</tr>
<tr class="even">
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">07/27/2016</td>
<td style="text-align: right;">1116</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arabi</td>
<td style="text-align: left;">Mazdak</td>
<td style="text-align: left;">1444758</td>
<td style="text-align: left;">07/28/2015</td>
<td style="text-align: right;">1550</td>
</tr>
<tr class="even">
<td style="text-align: left;">Cook</td>
<td style="text-align: left;">Susan</td>
<td style="text-align: left;">1561182</td>
<td style="text-align: left;">08/30/2016</td>
<td style="text-align: right;">480</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Cunningham</td>
<td style="text-align: left;">Christine</td>
<td style="text-align: left;">1220305</td>
<td style="text-align: left;">09/06/2012</td>
<td style="text-align: right;">109</td>
</tr>
<tr class="even">
<td style="text-align: left;">Dye</td>
<td style="text-align: left;">Matthew</td>
<td style="text-align: left;">1749376</td>
<td style="text-align: left;">05/17/2018</td>
<td style="text-align: right;">1279</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fenn</td>
<td style="text-align: left;">Kimberly</td>
<td style="text-align: left;">1561122</td>
<td style="text-align: left;">08/30/2016</td>
<td style="text-align: right;">480</td>
</tr>
<tr class="even">
<td style="text-align: left;">Franchak</td>
<td style="text-align: left;">John</td>
<td style="text-align: left;">1941449</td>
<td style="text-align: left;">07/21/2020</td>
<td style="text-align: right;">1580</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gale</td>
<td style="text-align: left;">Elaine</td>
<td style="text-align: left;">1400810</td>
<td style="text-align: left;">06/26/2014</td>
<td style="text-align: right;">1062</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">0092452</td>
<td style="text-align: left;">02/09/2001</td>
<td style="text-align: right;">31</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">0092452</td>
<td style="text-align: left;">02/09/2001</td>
<td style="text-align: right;">32</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">73</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">116</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">1147440</td>
<td style="text-align: left;">06/05/2012</td>
<td style="text-align: right;">218</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Huenerfauth</td>
<td style="text-align: left;">Matt</td>
<td style="text-align: left;">1462280</td>
<td style="text-align: left;">09/15/2014</td>
<td style="text-align: right;">1062</td>
</tr>
<tr class="even">
<td style="text-align: left;">Huenerfauth</td>
<td style="text-align: left;">Matt</td>
<td style="text-align: left;">1462280</td>
<td style="text-align: left;">09/15/2014</td>
<td style="text-align: right;">1249</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Karasik</td>
<td style="text-align: left;">Lana</td>
<td style="text-align: left;">1349044</td>
<td style="text-align: left;">01/22/2014</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kosie</td>
<td style="text-align: left;">Jessica</td>
<td style="text-align: left;">2004983</td>
<td style="text-align: left;">06/30/2020</td>
<td style="text-align: right;">1589</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Liu</td>
<td style="text-align: left;">Yanxi</td>
<td style="text-align: left;">1248076</td>
<td style="text-align: left;">09/09/2012</td>
<td style="text-align: right;">77</td>
</tr>
<tr class="even">
<td style="text-align: left;">Liu</td>
<td style="text-align: left;">Yanxi</td>
<td style="text-align: left;">1248076</td>
<td style="text-align: left;">09/09/2012</td>
<td style="text-align: right;">324</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lobue</td>
<td style="text-align: left;">Vanessa</td>
<td style="text-align: left;">1247590</td>
<td style="text-align: left;">05/22/2013</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lu</td>
<td style="text-align: left;">Hongjing</td>
<td style="text-align: left;">1655300</td>
<td style="text-align: left;">04/05/2017</td>
<td style="text-align: right;">1187</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Messinger</td>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">1052736</td>
<td style="text-align: left;">06/14/2011</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Messinger</td>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">1052736</td>
<td style="text-align: left;">06/14/2011</td>
<td style="text-align: right;">1474</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Messinger</td>
<td style="text-align: left;">Daniel</td>
<td style="text-align: left;">1620294</td>
<td style="text-align: left;">08/12/2016</td>
<td style="text-align: right;">987</td>
</tr>
<tr class="even">
<td style="text-align: left;">Movellan</td>
<td style="text-align: left;">Javier</td>
<td style="text-align: left;">0808767</td>
<td style="text-align: left;">08/26/2008</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oakes</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">0951580</td>
<td style="text-align: left;">08/26/2010</td>
<td style="text-align: right;">1294</td>
</tr>
<tr class="even">
<td style="text-align: left;">Poeppel</td>
<td style="text-align: left;">David</td>
<td style="text-align: left;">2043717</td>
<td style="text-align: left;">02/23/2021</td>
<td style="text-align: right;">1398</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rhodes</td>
<td style="text-align: left;">Marjorie</td>
<td style="text-align: left;">1147543</td>
<td style="text-align: left;">07/12/2012</td>
<td style="text-align: right;">45</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">07/20/2011</td>
<td style="text-align: right;">545</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">07/20/2011</td>
<td style="text-align: right;">546</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1056805</td>
<td style="text-align: left;">07/20/2011</td>
<td style="text-align: right;">1437</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">09/18/2015</td>
<td style="text-align: right;">546</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">09/18/2015</td>
<td style="text-align: right;">608</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1560810</td>
<td style="text-align: left;">09/18/2015</td>
<td style="text-align: right;">1437</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scott</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">1728133</td>
<td style="text-align: left;">07/07/2017</td>
<td style="text-align: right;">1437</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Senier</td>
<td style="text-align: left;">Laura</td>
<td style="text-align: left;">1948790</td>
<td style="text-align: left;">03/30/2020</td>
<td style="text-align: right;">1550</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sobel</td>
<td style="text-align: left;">David</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">05/01/2017</td>
<td style="text-align: right;">207</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sobel</td>
<td style="text-align: left;">David</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">05/01/2017</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sobel</td>
<td style="text-align: left;">David</td>
<td style="text-align: left;">1661068</td>
<td style="text-align: left;">05/01/2017</td>
<td style="text-align: right;">950</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tamis-Lemonda</td>
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">0721383</td>
<td style="text-align: left;">08/07/2007</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tamis-Lemonda</td>
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">1761053</td>
<td style="text-align: left;">08/22/2018</td>
<td style="text-align: right;">1241</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tamis-Lemonda</td>
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">1761053</td>
<td style="text-align: left;">08/22/2018</td>
<td style="text-align: right;">1403</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tian</td>
<td style="text-align: left;">Yingli</td>
<td style="text-align: left;">1400802</td>
<td style="text-align: left;">06/26/2014</td>
<td style="text-align: right;">1062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Verderame</td>
<td style="text-align: left;">Michael</td>
<td style="text-align: left;">1255832</td>
<td style="text-align: left;">08/12/2012</td>
<td style="text-align: right;">272</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vigeant</td>
<td style="text-align: left;">Michelle</td>
<td style="text-align: left;">1302741</td>
<td style="text-align: left;">01/25/2013</td>
<td style="text-align: right;">1135</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weisberg</td>
<td style="text-align: left;">Deena</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">04/09/2019</td>
<td style="text-align: right;">207</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weisberg</td>
<td style="text-align: left;">Deena</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">04/09/2019</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Weisberg</td>
<td style="text-align: left;">Deena</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">04/09/2019</td>
<td style="text-align: right;">269</td>
</tr>
<tr class="even">
<td style="text-align: left;">Weisberg</td>
<td style="text-align: left;">Deena</td>
<td style="text-align: left;">1929935</td>
<td style="text-align: left;">04/09/2019</td>
<td style="text-align: right;">950</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Woodward</td>
<td style="text-align: left;">Amanda</td>
<td style="text-align: left;">1628300</td>
<td style="text-align: left;">08/18/2016</td>
<td style="text-align: right;">1495</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wyble</td>
<td style="text-align: left;">Bradley</td>
<td style="text-align: left;">1331073</td>
<td style="text-align: left;">07/27/2013</td>
<td style="text-align: right;">79</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</section>
<section id="visualizations" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="visualizations">Visualizations</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>nsf <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">award_amt =</span> <span class="fu">as.numeric</span>(fundsObligatedAmt)) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">aes</span>(award_amt) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  ggplot2<span class="sc">::</span><span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-nsf-award-histogram-all" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="include/img/fig-nsf-award-histogram-all-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;4.1: Histogram of NSF awards for all Databrary volumes.</figcaption>
</figure>
</div>
</div>
</div>
<p>These represent <span class="math inline">\(n=\)</span> 38 unique NSF awards.</p>
<p>Of these, we were able to extract data from the NSF API for <span class="math inline">\(n=\)</span> 36 NSF awards.</p>
<p>The following volumes do not have matching NSF awards.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:700px; ">
<table class="lightable-material table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; position: sticky; top: 0; background-color: #FFFFFF;">vol_id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">award</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">url</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">268</td>
<td style="text-align: left;">BCS-15233982</td>
<td style="text-align: left;">https://databrary.org/volume/268</td>
</tr>
<tr class="even">
<td style="text-align: right;">269</td>
<td style="text-align: left;">NSF BCS-166106</td>
<td style="text-align: left;">https://databrary.org/volume/269</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>The NSF award IDs must be in error for these volumes.</p>
<p>We can search the NSF database for the term ‘databrary’ to see if we can find the correct NSF award ID.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>nsf_w_databrary <span class="ot">&lt;-</span> <span class="fu">get_nsf_data_for_keyword</span>(<span class="st">"databrary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following NSF-funded projects mention “Databrary” according to the NSF API:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>nsf_w_databrary <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(piFirstName, piLastName, id, title) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(piLastName, piFirstName) <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'html'</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_material</span>() <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"700px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:700px; ">
<table class="lightable-material table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piFirstName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piLastName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">title</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">1627993</td>
<td style="text-align: left;">NSF/SBE-BSF: Neural patterns underlying the development of planning in action production and anticipation in action perception</td>
</tr>
<tr class="even">
<td style="text-align: left;">Karen</td>
<td style="text-align: left;">Adolph</td>
<td style="text-align: left;">1139702</td>
<td style="text-align: left;">Data Coding, Analysis, Archiving, and Sharing for Open Collaboration: From OpenSHAPA to Open Data Sharing</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Elizabeth</td>
<td style="text-align: left;">Bonawitz</td>
<td style="text-align: left;">1623486</td>
<td style="text-align: left;">EAGER: MAKER: The origins of making: A Data Science Approach to Investigating Cognitive and Affective Basis of Learning through Constructing</td>
</tr>
<tr class="even">
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">2032713</td>
<td style="text-align: left;">EAGER: Expanding public access to restricted research data</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rick</td>
<td style="text-align: left;">Gilmore</td>
<td style="text-align: left;">1238599</td>
<td style="text-align: left;">Databrary: An open video-based data-sharing system for developmental science</td>
</tr>
<tr class="even">
<td style="text-align: left;">Felice</td>
<td style="text-align: left;">Levine</td>
<td style="text-align: left;">1656866</td>
<td style="text-align: left;">Workshop Proposal on Replication, Reproducibility, and the Use of Data Assets in Advancing the Frontiers of Science in Education Research--the Critical Role of Journals</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Vanessa</td>
<td style="text-align: left;">LoBue</td>
<td style="text-align: left;">1247590</td>
<td style="text-align: left;">Validation of the Child Affective Facial Expressions Set (CAFE)</td>
</tr>
<tr class="even">
<td style="text-align: left;">James</td>
<td style="text-align: left;">Rehg</td>
<td style="text-align: left;">1524565</td>
<td style="text-align: left;">Comp Cog: Collaborative Research on the Development of Visual Object Recognition</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Linda</td>
<td style="text-align: left;">Smith</td>
<td style="text-align: left;">1523982</td>
<td style="text-align: left;">Comp Cog: Collaborative Research on the Development of Visual Object Recognition</td>
</tr>
<tr class="even">
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">Tamis-LeMonda</td>
<td style="text-align: left;">2313856</td>
<td style="text-align: left;">Postdoctoral Fellowship: SPRF: Enabling Access: How Mothers Support Infants’ Emerging Motor Skills to Facilitate Infants’ Exploration of the Environment</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">Tamis-LeMonda</td>
<td style="text-align: left;">1761053</td>
<td style="text-align: left;">Collaborative Research: Math Cognition In Toddlers From Latino and White Families: Contributions Of Home Experiences With Mothers and Fathers</td>
</tr>
<tr class="even">
<td style="text-align: left;">Catherine</td>
<td style="text-align: left;">Tamis-LeMonda</td>
<td style="text-align: left;">1528831</td>
<td style="text-align: left;">RUI: An Investigation of Short and Long Term Effects of Cradling on Development</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>We can filter these based on the last names of the Databrary volume owners.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>nsf_w_databrary <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(piFirstName, piLastName, id) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(piLastName <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Smith"</span>, <span class="st">"Bonawitz"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(id) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">format =</span> <span class="st">'html'</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_material</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"700px"</span>, <span class="at">height =</span> <span class="st">"200px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:700px; ">
<table class="lightable-material table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piFirstName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">piLastName</th>
<th data-quarto-table-cell-role="th" style="text-align: left; position: sticky; top: 0; background-color: #FFFFFF;">id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Linda</td>
<td style="text-align: left;">Smith</td>
<td style="text-align: left;">1523982</td>
</tr>
<tr class="even">
<td style="text-align: left;">Elizabeth</td>
<td style="text-align: left;">Bonawitz</td>
<td style="text-align: left;">1623486</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
<p>From this result, it looks like the correct NSF award IDs for the projects on Databrary are <code>1523982</code> and possibly <code>1623486</code>. Databrary staff will contact the PIs to ascertain if this is the case and correct Databrary’s records, as appropriate.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that this workflow helps evaluate the quality of the data and metadata stored on Databrary.</p>
<p>We are considering incorporating these functions into the <code>databraryr</code> package in a future release.</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./databraryr-pkg.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><code>databraryr</code> R package</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./demographics.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Demographic data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>